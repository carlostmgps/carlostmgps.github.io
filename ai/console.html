<!DOCTYPE html>
<html>

<head>
  <meta name="description" content="My first AI testing" />
  <meta charset="utf-8">
  <title>AI</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="author" content="Carlos">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/synaptic/1.1.4/synaptic.js"></script>
</head>

<body>
<script>


const { Layer, Network } = window.synaptic;
var learningRate = .3;
function customizeNetwork(arrays){
  console.log("CuztomizingNetwork");
  if (arrays.length < 3){
    console.error("customizeNetwork array is shorter than three")
    return None
  }
  console.log("input:" + String(arrays[0]));
  input = new Layer(arrays[0]);
  console.log("output:" + String(arrays[arrays.length-1]));
  output = new Layer(arrays[arrays.length - 1]);
  hiddens = [];
  for (var n = 0; n < arrays.length - 2 ; n++) {
    console.log("hidden add:" + String(arrays[n]));
    hiddens = hiddens.concat([
      new Layer(arrays[n])
    ]);
    console.log("now hidden is len in:" + String(hiddens.length))
  }
  input.project(hiddens[0]);
  for (var n2 = 0; n2 < hiddens.length - 2; n2++){
    console.log("projecting " + String(n2) + "to " + String(n2+1))
    hiddens[n2].project(hiddens[n2+1]);
  }
  hiddens[hiddens.length-1].project(output);
  
  networktem = new  Network({
    input: input,
    hidden: [...hiddens],
    output: output
  });
  var mynet = {
    get : function get(value){ return this.activate(value); },
    batchTrain : function batchTrain(times,vs,os){
      for (var i = 0; i < times; i++) {
        for (var n = 0; n < vs.length;n++) {
          this.activate(vs[n]);
          this.propagate(0.3, [os[n]]);
        };
      };
    },
    train : function train(times,v,o){
      this.batchTrain(times,[v],[o]);
    }
  };
  
  var newnet = Object.assign(networktem, mynet);
  
  return newnet
}
function get(value){ return myNetwork.activate(value); }
function batchTrain(times,vs,os){
  for (var i = 0; i < times; i++) {
    for (var n = 0; n < vs.length;n++) {
      myNetwork.activate(vs[n]);
      myNetwork.propagate(learningRate, [os[n]]);
    };
  };
}
function train(times,v,o){
  batchTrain(times,[v],[o]);
}
</script>

</body>
</html>
